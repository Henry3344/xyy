<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Survival English Guide v25.5</title>
    <style>
        /* --- CSS å˜é‡ --- */
        :root {
            --bg-body: #f2f2f7;
            --bg-card: #ffffff;
            --text-main: #1c1c1e;
            --text-sub: #8e8e93;
            --primary: #007aff;
            --primary-light: #e5f1ff;
            --border: #c6c6c8;
            --chip-bg: #ffffff;
            --chip-border: #d1d1d6;
            --nav-bg: rgba(255,255,255,0.95);
            --shadow: rgba(0,0,0,0.08);
            --display-area: #f2f2f7;
            --danger: #ff3b30;
            --accent: #5856d6;
            --hint-bg: rgba(255, 255, 255, 0.7); /* æµ…è‰²æ¨¡å¼æ¨¡ç³ŠèƒŒæ™¯ */
        }

        [data-theme="dark"] {
            --bg-body: #000000;
            --bg-card: #1c1c1e;
            --text-main: #ffffff;
            --text-sub: #aeaeb2;
            --primary: #0a84ff;
            --primary-light: #1c1c1e;
            --border: #38383a;
            --chip-bg: #2c2c2e;
            --chip-border: #3a3a3c;
            --nav-bg: rgba(28,28,30,0.95);
            --shadow: rgba(255,255,255,0.05);
            --display-area: #2c2c2e;
            --danger: #ff453a;
            --accent: #5e5ce6;
            --hint-bg: rgba(28, 28, 30, 0.7); /* æ·±è‰²æ¨¡å¼æ¨¡ç³ŠèƒŒæ™¯ */
        }

        /* --- åŸºç¡€å¸ƒå±€ --- */
        html, body { height: 100%; overflow: hidden; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: var(--bg-body); 
            color: var(--text-main); 
            margin: 0; padding: 0;
            display: flex;
            flex-direction: column;
            transition: background 0.3s, color 0.3s; 
            -webkit-tap-highlight-color: transparent;
        }
        
        /* --- é¡¶éƒ¨æ§åˆ¶å° --- */
        .header-container { 
            flex: 0 0 auto;
            background: var(--nav-bg); 
            backdrop-filter: blur(15px); 
            z-index: 1000; 
            border-bottom: 1px solid var(--border); 
            box-shadow: 0 4px 15px var(--shadow); 
            padding-top: env(safe-area-inset-top);
        }
        
        .top-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 15px; max-width: 650px; margin: 0 auto; }
        .app-title { font-size: 1.1em; font-weight: 800; color: var(--text-main); margin: 0; }
        .header-actions { display: flex; gap: 12px; }
        .icon-btn { background: none; border: 1px solid var(--border); color: var(--text-main); width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-size: 1em; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
        .icon-btn.danger { border-color: var(--danger); color: var(--danger); font-weight: bold; }
        
        .search-row { padding: 0 15px 8px 15px; max-width: 650px; margin: 0 auto; }
        .search-input { width: 100%; padding: 8px 12px; border-radius: 10px; border: 1px solid var(--border); background: var(--bg-body); color: var(--text-main); font-size: 0.95em; box-sizing: border-box; outline: none; transition: border 0.2s; }
        .search-input:focus { border-color: var(--primary); }

        .nav-scroll { display: flex; overflow-x: auto; padding: 0 15px 10px 15px; gap: 8px; max-width: 650px; margin: 0 auto; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
        .nav-scroll::-webkit-scrollbar { display: none; }
        .nav-btn { flex: 0 0 auto; background: var(--primary-light); color: var(--primary); border: 1px solid transparent; padding: 5px 10px; border-radius: 14px; font-weight: 600; font-size: 0.8em; text-decoration: none; transition: all 0.2s; white-space: nowrap; cursor: pointer; }
        [data-theme="dark"] .nav-btn { border-color: var(--border); }
        .nav-btn.active-nav { background: var(--primary); color: white; }

        /* --- ä¸»å†…å®¹åŒº --- */
        #content-area {
            flex: 1;
            display: flex;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-snap-type: x mandatory; 
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            padding: 15px 7.5vw; 
            gap: 15px;
            align-items: flex-start;
        }
        #content-area::-webkit-scrollbar { display: none; }

        /* --- å•å…ƒå¡ç‰‡ --- */
        .unit-card { 
            flex: 0 0 85vw; 
            max-width: 500px;
            background: var(--bg-card); 
            border-radius: 20px; 
            padding: 20px; 
            box-shadow: 0 8px 30px var(--shadow); 
            border: 1px solid var(--border); 
            scroll-snap-align: center; 
            scroll-snap-stop: always;
            box-sizing: border-box;
            height: 98%; 
            max-height: 85vh; 
            overflow-y: auto; 
            overflow-x: hidden;
            position: relative;
            transition: transform 0.2s;
            padding-bottom: 50px; /* å¢åŠ åº•éƒ¨ç©ºé—´é˜²æ­¢é®æŒ¡ */
        }
        .unit-card::-webkit-scrollbar { display: none; }

        .unit-header { font-size: 1.3em; font-weight: 800; color: var(--primary); margin-bottom: 15px; border-bottom: 2px solid var(--display-area); padding-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .sort-rank { font-size: 0.6em; color: var(--text-sub); font-weight: normal; opacity: 0.5; background: var(--display-area); padding: 2px 6px; border-radius: 4px; }

        /* --- æ­¥éª¤åŒºåŸŸ --- */
        .step-container { margin-bottom: 20px; width: 100%; }
        .step-label { font-size: 0.75em; color: var(--text-sub); font-weight: 700; margin-bottom: 6px; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
        
        .pattern-box { 
            font-family: "Menlo", monospace; color: #d63031; background: #ffeaea; padding: 2px 6px; border-radius: 4px; font-size: 1em; margin-left: 5px; border: 1px solid #ffcccc; display: inline-block; margin-top: 4px; 
            white-space: normal; word-wrap: break-word; 
        }
        [data-theme="dark"] .pattern-box { background: #3e1a1a; border-color: #5c1e1e; color: #ff6b6b; }

        /* --- ä¸»å¥æ˜¾ç¤ºåŒº --- */
        .display-area { 
            background-color: var(--display-area); padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; gap: 10px; transition: background 0.3s; border: 1px solid var(--border); 
            width: 100%; box-sizing: border-box; 
        }
        .text-content { flex-grow: 1; min-width: 0; }
        .english-sentence { 
            font-size: 1.25em; font-weight: 600; line-height: 1.3; color: var(--text-main); margin-bottom: 4px; 
            white-space: normal; word-wrap: break-word; 
        }
        .highlight { color: var(--primary); text-decoration: underline; text-decoration-thickness: 3px; text-underline-offset: 4px; cursor: pointer; }
        .translation { color: var(--text-sub); font-size: 0.9em; white-space: normal; }
        
        /* --- æŒ‰é’® --- */
        .btn-audio { flex-shrink: 0; background: var(--bg-card); border: 1px solid var(--border); border-radius: 50%; width: 40px; height: 40px; min-width: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1em; box-shadow: 0 2px 5px var(--shadow); color: var(--primary); }
        .btn-audio:active { transform: scale(0.92); }
        
        /* --- è¯æ±‡ç‚¹å‡»åŒº --- */
        .chips-container { display: flex; flex-wrap: wrap; gap: 8px; width: 100%; }
        .chip { 
            background: var(--chip-bg); border: 1px solid var(--chip-border); 
            padding: 6px 12px; border-radius: 16px; 
            font-size: 0.9em; cursor: pointer; font-weight: 600; color: var(--text-main); 
            transition: all 0.2s; user-select: none; 
            max-width: 100%; white-space: normal; word-wrap: break-word; 
        }
        .chip:hover { transform: translateY(-1px); border-color: var(--primary); }
        .chip.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 2px 8px rgba(0,122,255,0.3); transform: scale(1.02); }
        
        /* åŠ å·æŒ‰é’®å®¹å™¨ */
        .add-btn-wrapper { position: relative; display: inline-block; vertical-align: middle; }
        .add-chip-btn { border: 1px dashed var(--text-sub); color: var(--text-sub); background: transparent; padding: 6px 10px; }
        
        /* æ°”æ³¡æç¤º (v25.3 çª„ç‰ˆä¿®æ­£) */
        .bubble-tip { 
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%) translateY(-100%); 
            background: var(--danger); color: white; padding: 8px 10px; border-radius: 10px; 
            font-size: 0.75em; font-weight: bold; box-shadow: 0 4px 12px rgba(255, 59, 48, 0.4); 
            animation: bounce 1.5s infinite; z-index: 99; width: 150px; 
            white-space: normal; text-align: center; line-height: 1.4; 
            opacity: 0.95; transition: opacity 1s ease; pointer-events: none; margin-bottom: 12px;
        }
        .bubble-tip.fade-out { opacity: 0; }
        .bubble-tip::after { 
            content: ''; position: absolute; top: 100%; left: 50%; margin-left: -6px; 
            border-width: 6px; border-style: solid; border-color: var(--danger) transparent transparent transparent; 
        }
        @keyframes bounce { 0%, 100% { transform: translateX(-50%) translateY(-100%); } 50% { transform: translateX(-50%) translateY(-108%); } }

        /* --- åˆ†éš”çº¿ --- */
        .divider { height: 1px; background: var(--border); margin: 20px 0; border: none; }

        /* --- è¿æ‹›æ€»ç»“ --- */
        .combo-box { 
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; padding: 15px; border-radius: 16px; margin-top: 20px; position: relative; box-shadow: 0 8px 15px rgba(0,0,0,0.2); 
            width: 100%; box-sizing: border-box;
        }
        [data-theme="dark"] .combo-box { background: linear-gradient(135deg, #1c1c1e 0%, #2c2c2e 100%); border: 1px solid #38383a; }
        .combo-title { font-size: 0.8em; font-weight: bold; opacity: 0.8; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; color: #ecf0f1; }
        .combo-text { font-size: 1.1em; font-weight: 600; line-height: 1.4; padding-right: 45px; margin-bottom: 10px; transition: all 0.3s; white-space: normal; word-wrap: break-word; }
        .structure-box { background: rgba(255,255,255,0.1); padding: 8px; border-radius: 8px; font-size: 0.8em; color: #bdc3c7; border: 1px dashed rgba(255,255,255,0.3); transition: all 0.3s; white-space: normal; }
        .struct-tag { display: inline-block; background: #e67e22; color: white; padding: 1px 5px; border-radius: 3px; font-size: 0.85em; margin-right: 4px; font-weight: bold; margin-bottom: 4px; }
        .struct-arrow { margin: 0 4px; color: #ecf0f1; }
        .combo-audio-btn { position: absolute; top: 15px; right: 15px; background: #27ae60; border: none; color: white; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1em; box-shadow: 0 4px 8px rgba(39, 174, 96, 0.4); }
        
        /* --- æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š æç¤º (v25.4 æ¨¡ç³Šæ²‰åº•ç‰ˆ) --- */
        .scroll-hint {
            position: absolute; bottom: 0; left: 0; width: 100%;
            text-align: center; color: var(--primary); font-size: 0.8em; font-weight: 600;
            pointer-events: none; opacity: 0; transition: opacity 0.3s;
            animation: bounce-hint 2s infinite; z-index: 50;
            background: var(--hint-bg); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            padding: 12px 0; border-radius: 0 0 20px 20px;
        }
        .scroll-hint.visible { opacity: 1; }
        @keyframes bounce-hint { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-3px);} 60% {transform: translateY(-2px);} }

        /* --- æ‚¬æµ®æ§åˆ¶ç»„ --- */
        .float-controls { position: fixed; bottom: 40px; right: 20px; display: flex; flex-direction: column; gap: 15px; z-index: 2000; align-items: flex-end; }
        .fab-quiz { background: var(--danger); color: white; padding: 8px 16px; border-radius: 30px; font-weight: bold; box-shadow: 0 4px 15px rgba(255, 59, 48, 0.4); cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 6px; border: none; font-size: 0.85em; }
        .fab-quiz:active { transform: scale(0.95); }
        .fab-random { background: var(--accent); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.2em; box-shadow: 0 4px 15px rgba(88, 86, 214, 0.4); border: none; cursor: pointer; }
        .quiz-active-text, body.quiz-mode .quiz-default-text { display: none; }
        body.quiz-mode .quiz-active-text { display: inline; }
        body.quiz-mode .fab-quiz { background: #34c759; box-shadow: 0 4px 15px rgba(52, 199, 89, 0.4); }

        /* --- ç‰¹è®­æ¨¡å¼ --- */
        body.quiz-mode .english-sentence { color: transparent !important; text-shadow: 0 0 13px rgba(128,128,128,0.5); user-select: none; }
        body.quiz-mode .english-sentence:active { color: var(--text-main) !important; text-shadow: none; }
        body.quiz-mode .pattern-box { color: transparent !important; background-color: var(--border); border-color: var(--border); user-select: none; }
        body.quiz-mode .pattern-box:active { color: #d63031 !important; background-color: #ffeaea; }
        body.quiz-mode .combo-text { color: transparent !important; text-shadow: 0 0 10px rgba(255,255,255,0.4); user-select: none; background: rgba(255,255,255,0.1); border-radius: 4px; }
        body.quiz-mode .combo-text:active { color: white !important; text-shadow: none; background: none; }
        body.quiz-mode .structure-box { color: transparent !important; text-shadow: 0 0 8px rgba(255,255,255,0.5); user-select: none; }
        body.quiz-mode .structure-box * { opacity: 0; }
        body.quiz-mode .structure-box:active { color: #bdc3c7 !important; text-shadow: none; }
        body.quiz-mode .structure-box:active * { opacity: 1; }

        /* --- åº”æ€¥æ¨¡å¼ Overlay --- */
        .emergency-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: none; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .emergency-overlay.active { display: flex; }
        .emergency-close { position: absolute; top: 20px; right: 20px; color: white; font-size: 2em; cursor: pointer; padding: 10px; }
        .emergency-card { flex: 1; display: flex; align-items: center; justify-content: center; text-align: center; border-bottom: 1px solid #333; cursor: pointer; }
        .emergency-text { font-size: 2.2em; color: white; font-weight: bold; line-height: 1.2; text-transform: uppercase; margin-bottom: 10px; }
        .emergency-sub { font-size: 1.2em; color: #aaa; }

        /* --- å¼¹çª—é€šç”¨ --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 5000; display: none; align-items: center; justify-content: center; }
        .modal-card { background: var(--bg-card); width: 85%; max-width: 400px; padding: 25px; border-radius: 20px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border: 1px solid var(--border); animation: popIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .modal-title { font-size: 1.2em; font-weight: bold; color: var(--text-sub); margin-bottom: 20px; text-transform: uppercase; }
        .modal-content-text { font-size: 1.2em; color: var(--text-main); margin-bottom: 30px; line-height: 1.5; }
        .modal-actions { display: flex; gap: 10px; justify-content: center; }
        .modal-btn { padding: 8px 16px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 1em; }
        .btn-reveal { background: var(--primary); color: white; }
        .btn-close { background: var(--border); color: var(--text-main); }

        /* åº•éƒ¨ç‰ˆæƒ - æç®€æçª„ç‰ˆ */
        .fixed-footer { 
            flex: 0 0 auto;
            text-align: center; color: var(--text-sub); font-size: 0.6em; 
            padding: 3px 0; 
            border-top: 1px solid var(--border); 
            background: var(--bg-body);
            opacity: 0.5;
        }
    </style>
</head>
<body>

    <div class="header-container" id="mainHeader">
        <div class="top-row">
            <div class="app-title">ğŸ‡ºğŸ‡¸ Survival English Guide</div>
            <div class="header-actions">
                <button class="icon-btn danger" onclick="toggleEmergency()" title="åº”æ€¥æ¨¡å¼">âš¡</button>
                <button class="icon-btn" onclick="toggleTheme()" title="åˆ‡æ¢æ¨¡å¼">ğŸŒ—</button>
            </div>
        </div>
        
        <div class="search-row">
            <input type="text" class="search-input" id="searchBox" placeholder="ğŸ” æœç´¢åœºæ™¯ (å¦‚: é€€è´§, coffee...)" onkeyup="filterUnits()">
        </div>

        <div class="nav-scroll">
            <a onclick="scrollToUnit('u1')" class="nav-btn">é‚»å±…</a>
            <a onclick="scrollToUnit('u2')" class="nav-btn">ä½ç½®</a>
            <a onclick="scrollToUnit('u3')" class="nav-btn">æ´—æ‰‹é—´</a>
            <a onclick="scrollToUnit('u4')" class="nav-btn">é“¶è¡Œ</a>
            <a onclick="scrollToUnit('u5')" class="nav-btn">ç»“è´¦</a>
            <a onclick="scrollToUnit('u6')" class="nav-btn">ç‚¹é¤</a>
            <a onclick="scrollToUnit('u7')" class="nav-btn">èšé¤</a>
            <a onclick="scrollToUnit('u8')" class="nav-btn">å™æ—§</a>
            <a onclick="scrollToUnit('u9')" class="nav-btn">æ‰“è½¦</a>
            <a onclick="scrollToUnit('u10')" class="nav-btn">æ€¥æ•‘</a>
            <a onclick="scrollToUnit('u11')" class="nav-btn">æ²¡å¬æ‡‚</a>
            <a onclick="scrollToUnit('u12')" class="nav-btn">é€€è´§</a>
            <a onclick="scrollToUnit('u13')" class="nav-btn">é¢„çº¦</a>
        </div>
    </div>

    <div class="emergency-overlay" id="emergencyOverlay">
        <div class="emergency-close" onclick="toggleEmergency()">âœ•</div>
        <div class="emergency-card" onclick="speakDirect('I need help! Please call 911.')">
            <div>
                <div class="emergency-text" style="color: #ff3b30;">I NEED HELP!<br>CALL 911</div>
                <div class="emergency-sub">æ•‘å‘½ï¼è¯·æ‰“911</div>
            </div>
        </div>
        <div class="emergency-card" onclick="speakDirect('I do not speak English. Please use a translation app.')">
            <div>
                <div class="emergency-text">I DON'T SPEAK ENGLISH</div>
                <div class="emergency-sub">æˆ‘ä¸ä¼šè‹±è¯­ (è¯·ç”¨ç¿»è¯‘è½¯ä»¶)</div>
            </div>
        </div>
        <div class="emergency-card" onclick="speakDirect('I am lost. Can you help me?')">
            <div>
                <div class="emergency-text">I AM LOST<br>CAN YOU HELP?</div>
                <div class="emergency-sub">æˆ‘è¿·è·¯äº†ï¼Œèƒ½å¸®æˆ‘å—ï¼Ÿ</div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="randomModal">
        <div class="modal-card">
            <div class="modal-title">ğŸ² éšæœºåœºæ™¯æŒ‘æˆ˜</div>
            <div class="modal-content-text" id="modalQuestion" style="font-weight:bold; font-size: 1.4em;">...</div>
            <div class="modal-actions">
                <button class="modal-btn btn-close" onclick="closeModal('randomModal')">å…³é—­</button>
                <button class="modal-btn btn-reveal" onclick="revealRandomAnswer()">æŸ¥çœ‹ç­”æ¡ˆ</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="reportModal">
        <div class="modal-card">
            <div class="modal-title">ğŸ“… æœˆåº¦æš–å¿ƒå°ç»“</div>
            <div class="modal-content-text" id="reportContent" style="text-align: left; font-size: 1em;">...</div>
            <div class="modal-actions">
                <button class="modal-btn btn-reveal" onclick="closeModal('reportModal')">ç»§ç»­åŠ æ²¹ï¼</button>
            </div>
        </div>
    </div>

    <div class="float-controls">
        <button class="fab-random" onclick="startRandomDrill()" title="éšæœºæŠ½æŸ¥">ğŸ²</button>
        <button class="fab-quiz" onclick="toggleQuizMode()">
            <span class="quiz-default-text">ğŸ‘ï¸ é®æŒ¡ç‰¹è®­</span>
            <span class="quiz-active-text">âœ… æ¢å¤æ˜¾ç¤º</span>
        </button>
    </div>

    <div id="content-area">
    <div class="unit-card" id="u1" data-name="é‚»å±…æ‰“æ‹›å‘¼" data-keywords="é‚»å±… æ‰“æ‹›å‘¼ ä»‹ç» neighbor">
            <div class="unit-header">é‚»å±…æ‰“æ‹›å‘¼<span class="sort-rank"></span></div>
            <div class="step-container">
                <span class="step-label">Step 1: ä»‹ç» <span class="pattern-box">Hi, I'm ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Hi, I'm <span class="highlight" id="u1-s1-word">your new neighbor</span>.</div><div class="translation" id="u1-s1-trans">å—¨ï¼Œæˆ‘æ˜¯ä½ çš„æ–°é‚»å±…ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u1-s1-word', 'Hi, I am', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u1-s1-chips">
                    <div class="chip active" onclick="updateUnit(1, 1, 'your new neighbor', 'ä½ çš„æ–°é‚»å±…', 'Hi, I am', '', this)">your new neighbor</div>
                    <div class="chip" onclick="updateUnit(1, 1, 'Henry', 'Henry', 'Hi, I am', '', this)">Henry</div>
                    <div class="chip" onclick="updateUnit(1, 1, 'moving in', 'åˆšæ¬è¿›æ¥', 'Hi, I am', '', this)">moving in</div>
                    <div class="chip" onclick="updateUnit(1, 1, 'living next door', 'ä½éš”å£çš„', 'Hi, I am', '', this)">living next door</div>
                    <div class="chip" onclick="updateUnit(1, 1, 'new here', 'æ–°æ¥çš„', 'Hi, I am', '', this)">new here</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(1, 1, 'Hi, I am', '')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: ä½å€ <span class="pattern-box">I live in ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I live in <span class="highlight" id="u1-s2-word">Apt 302</span>.</div><div class="translation" id="u1-s2-trans">æˆ‘ä½åœ¨302å®¤ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u1-s2-word', 'I live in', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u1-s2-chips">
                    <div class="chip active" onclick="updateUnit(1, 2, 'Apt 302', '302å®¤', 'I live in', '', this)">Apt 302</div>
                    <div class="chip" onclick="updateUnit(1, 2, 'next door', 'éš”å£', 'I live', '', this)">next door</div>
                    <div class="chip" onclick="updateUnit(1, 2, 'downstairs', 'æ¥¼ä¸‹', 'I live', '', this)">downstairs</div>
                    <div class="chip" onclick="updateUnit(1, 2, 'upstairs', 'æ¥¼ä¸Š', 'I live', '', this)">upstairs</div>
                    <div class="chip" onclick="updateUnit(1, 2, 'this building', 'è¿™æ ‹æ¥¼', 'I live in', '', this)">this building</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(1, 2, 'I live in', '')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"Hi, I'm Henry. I live next door, nice to meet you."</div>
                <button class="combo-audio-btn" onclick="speakDirect('Hi, I am Henry. I live next door, nice to meet you.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u2" data-name="è¯¢é—®ä½ç½®" data-keywords="ä½ç½® æ‰¾è·¯ é—®è·¯ location looking for">
            <div class="unit-header">è¯¢é—®ä½ç½®</div>
            <div class="step-container">
                <span class="step-label">Step 1: ç›®çš„ <span class="pattern-box">I'm looking for ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Excuse me, I'm looking for <span class="highlight" id="u2-s1-word">Unit 5B</span>.</div><div class="translation" id="u2-s1-trans">æ‰“æ‰°ä¸€ä¸‹ï¼Œæˆ‘åœ¨æ‰¾5Bå•å…ƒã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u2-s1-word', 'Excuse me, I am looking for', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u2-s1-chips">
                    <div class="chip active" onclick="updateUnit(2, 1, 'Unit 5B', '5Bå•å…ƒ', 'Excuse me, I am looking for', '', this)">Unit 5B</div>
                    <div class="chip" onclick="updateUnit(2, 1, 'the exit', 'å‡ºå£', 'Excuse me, I am looking for', '', this)">the exit</div>
                    <div class="chip" onclick="updateUnit(2, 1, 'the elevator', 'ç”µæ¢¯', 'Excuse me, I am looking for', '', this)">the elevator</div>
                    <div class="chip" onclick="updateUnit(2, 1, 'the mailroom', 'æ”¶å‘å®¤', 'Excuse me, I am looking for', '', this)">the mailroom</div>
                    <div class="chip" onclick="updateUnit(2, 1, 'the gym', 'å¥èº«æˆ¿', 'Excuse me, I am looking for', '', this)">the gym</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(2, 1, 'Excuse me, I am looking for', '')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: æé—® <span class="pattern-box">Could you tell me ... ?</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Could you tell me <span class="highlight" id="u2-s2-word">how to get there</span>?</div><div class="translation" id="u2-s2-trans">èƒ½å‘Šè¯‰æˆ‘æ€ä¹ˆèµ°å—ï¼Ÿ</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u2-s2-word', 'Could you tell me', '?')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u2-s2-chips">
                    <div class="chip active" onclick="updateUnit(2, 2, 'how to get there', 'æ€ä¹ˆèµ°', 'Could you tell me', 'å—', this)">how to get there</div>
                    <div class="chip" onclick="updateUnit(2, 2, 'where it is', 'å®ƒåœ¨å“ª', 'Could you tell me', 'å—', this)">where it is</div>
                    <div class="chip" onclick="updateUnit(2, 2, 'which way', 'å“ªè¾¹èµ°', 'Could you tell me', 'å—', this)">which way</div>
                    <div class="chip" onclick="updateUnit(2, 2, 'the address', 'å…·ä½“åœ°å€', 'Could you tell me', 'å—', this)">the address</div>
                    <div class="chip" onclick="updateUnit(2, 2, 'if it is far', 'è¿œä¸è¿œ', 'Could you tell me', 'å—', this)">if it is far</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(2, 2, 'Could you tell me', '?')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"Excuse me, I'm looking for the mailroom. Could you tell me where it is?"</div>
                <button class="combo-audio-btn" onclick="speakDirect('Excuse me, I am looking for the mailroom. Could you tell me where it is?')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u3" data-name="å€Ÿç”¨æ´—æ‰‹é—´" data-keywords="æ´—æ‰‹é—´ å•æ‰€ ç´§æ€¥ restroom urgent">
            <div class="unit-header">å€Ÿç”¨æ´—æ‰‹é—´</div>
            <div class="step-container">
                <span class="step-label">Step 1: ç¤¼è²Œè¯·æ±‚ <span class="pattern-box">Could I use ... ?</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Could I use your <span class="highlight" id="u3-s1-word">restroom</span>?</div><div class="translation" id="u3-s1-trans">æˆ‘èƒ½å€Ÿç”¨ä¸€ä¸‹æ‚¨çš„æ´—æ‰‹é—´å—ï¼Ÿ</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u3-s1-word', 'Could I use your', '?')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u3-s1-chips">
                    <div class="chip active" onclick="updateUnit(3, 1, 'restroom', 'æ´—æ‰‹é—´', 'Could I use your', 'å—', this)">restroom</div>
                    <div class="chip" onclick="updateUnit(3, 1, 'bathroom', 'å«ç”Ÿé—´', 'Could I use your', 'å—', this)">bathroom</div>
                    <div class="chip" onclick="updateUnit(3, 1, 'charger', 'å……ç”µå™¨', 'Could I use your', 'å—', this)">charger</div>
                    <div class="chip" onclick="updateUnit(3, 1, 'phone', 'ç”µè¯', 'Could I use your', 'å—', this)">phone</div>
                    <div class="chip" onclick="updateUnit(3, 1, 'wifi', 'WiFi', 'Could I use your', 'å—', this)">wifi</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(3, 1, 'Could I use your', '?')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: è¡¥å……è¯´æ˜ <span class="pattern-box">It's really ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">It's really <span class="highlight" id="u3-s2-word">urgent</span>.</div><div class="translation" id="u3-s2-trans">çœŸçš„å¾ˆç´§æ€¥ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u3-s2-word', 'It is really', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u3-s2-chips">
                    <div class="chip active" onclick="updateUnit(3, 2, 'urgent', 'ç´§æ€¥', 'It is really', '', this)">urgent</div>
                    <div class="chip" onclick="updateUnit(3, 2, 'quick', 'å¿«(å¾ˆå¿«å°±å¥½)', 'It will be really', '', this)">quick</div>
                    <div class="chip" onclick="updateUnit(3, 2, 'important', 'é‡è¦', 'It is really', '', this)">important</div>
                    <div class="chip" onclick="updateUnit(3, 2, 'necessary', 'æœ‰å¿…è¦', 'It is really', '', this)">necessary</div>
                    <div class="chip" onclick="updateUnit(3, 2, 'an emergency', 'æ€¥äº‹', 'It is', '', this)">an emergency</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(3, 2, 'It is really', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"Sorry to bother you, could I use your restroom? It's really urgent."</div>
                <button class="combo-audio-btn" onclick="speakDirect('Sorry to bother you, could I use your restroom? It is really urgent.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u4" data-name="é“¶è¡ŒåŠäº‹" data-keywords="é“¶è¡Œ å¼€æˆ· å­˜æ¬¾ bank">
            <div class="unit-header">é“¶è¡ŒåŠäº‹</div>
            <div class="step-container">
                <span class="step-label">Step 1: éœ€æ±‚ <span class="pattern-box">I'd like to ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'd like to <span class="highlight" id="u4-s1-word">open an account</span>.</div><div class="translation" id="u4-s1-trans">æˆ‘æƒ³å¼€ä¸€ä¸ªè´¦æˆ·ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u4-s1-word', 'I would like to', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u4-s1-chips">
                    <div class="chip active" onclick="updateUnit(4, 1, 'open an account', 'å¼€ä¸ªè´¦æˆ·', 'I would like to', '', this)">open an account</div>
                    <div class="chip" onclick="updateUnit(4, 1, 'deposit money', 'å­˜é’±', 'I would like to', '', this)">deposit money</div>
                    <div class="chip" onclick="updateUnit(4, 1, 'withdraw cash', 'å–é’±', 'I would like to', '', this)">withdraw cash</div>
                    <div class="chip" onclick="updateUnit(4, 1, 'exchange currency', 'æ¢æ±‡', 'I would like to', '', this)">exchange currency</div>
                    <div class="chip" onclick="updateUnit(4, 1, 'wire money', 'æ±‡æ¬¾', 'I would like to', '', this)">wire money</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(4, 1, 'I would like to', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: æä¾›è¯ä»¶ <span class="pattern-box">Here is my ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Here is my <span class="highlight" id="u4-s2-word">ID card</span>.</div><div class="translation" id="u4-s2-trans">è¿™æ˜¯æˆ‘çš„èº«ä»½è¯ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u4-s2-word', 'Here is my', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u4-s2-chips">
                    <div class="chip active" onclick="updateUnit(4, 2, 'ID card', 'èº«ä»½è¯', 'Here is my', '', this)">ID card</div>
                    <div class="chip" onclick="updateUnit(4, 2, 'passport', 'æŠ¤ç…§', 'Here is my', '', this)">passport</div>
                    <div class="chip" onclick="updateUnit(4, 2, 'debit card', 'å€Ÿè®°å¡', 'Here is my', '', this)">debit card</div>
                    <div class="chip" onclick="updateUnit(4, 2, 'check', 'æ”¯ç¥¨', 'Here is my', '', this)">check</div>
                    <div class="chip" onclick="updateUnit(4, 2, 'application form', 'ç”³è¯·è¡¨', 'Here is my', '', this)">application form</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(4, 2, 'Here is my', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'd like to open an account. Here is my passport."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I would like to open an account. Here is my passport.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>
        <div class="unit-card" id="u5" data-name="è¶…å¸‚ç»“è´¦" data-keywords="è¶…å¸‚ ç»“è´¦ æ”¯ä»˜ checkout">
            <div class="unit-header">è¶…å¸‚ç»“è´¦</div>
            <div class="step-container">
                <span class="step-label">Step 1: æ”¯ä»˜æ–¹å¼ <span class="pattern-box">I'd like to pay by ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'd like to pay by <span class="highlight" id="u5-s1-word">credit card</span>.</div><div class="translation" id="u5-s1-trans">æˆ‘æƒ³ç”¨ä¿¡ç”¨å¡æ”¯ä»˜ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u5-s1-word', 'I would like to pay by', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u5-s1-chips">
                    <div class="chip active" onclick="updateUnit(5, 1, 'credit card', 'ä¿¡ç”¨å¡', 'I would like to pay by', '', this)">credit card</div>
                    <div class="chip" onclick="updateUnit(5, 1, 'cash', 'ç°é‡‘', 'I would like to pay by', '', this)">cash</div>
                    <div class="chip" onclick="updateUnit(5, 1, 'Apple Pay', 'Apple Pay', 'I would like to pay by', '', this)">Apple Pay</div>
                    <div class="chip" onclick="updateUnit(5, 1, 'debit card', 'å€Ÿè®°å¡', 'I would like to pay by', '', this)">debit card</div>
                    <div class="chip" onclick="updateUnit(5, 1, 'gift card', 'ç¤¼å“å¡', 'I would like to pay by', '', this)">gift card</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(5, 1, 'I would like to pay by', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: è¯¢é—® <span class="pattern-box">Do you offer ... ?</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Do you offer <span class="highlight" id="u5-s2-word">plastic bags</span>?</div><div class="translation" id="u5-s2-trans">ä½ ä»¬æä¾›å¡‘æ–™è¢‹å—ï¼Ÿ</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u5-s2-word', 'Do you offer', '?')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u5-s2-chips">
                    <div class="chip active" onclick="updateUnit(5, 2, 'plastic bags', 'å¡‘æ–™è¢‹', 'Do you offer', 'å—', this)">plastic bags</div>
                    <div class="chip" onclick="updateUnit(5, 2, 'a receipt', 'æ”¶æ®', 'Do you offer', 'å—', this)">a receipt</div>
                    <div class="chip" onclick="updateUnit(5, 2, 'cash back', 'ç°é‡‘è¿”è¿˜', 'Do you offer', 'å—', this)">cash back</div>
                    <div class="chip" onclick="updateUnit(5, 2, 'gift wrapping', 'ç¤¼å“åŒ…è£…', 'Do you offer', 'å—', this)">gift wrapping</div>
                    <div class="chip" onclick="updateUnit(5, 2, 'discounts', 'æŠ˜æ‰£', 'Do you offer', 'å—', this)">discounts</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(5, 2, 'Do you offer', '?')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'll pay by credit card. Do you offer a receipt?"</div>
                <button class="combo-audio-btn" onclick="speakDirect('I will pay by credit card. Do you offer a receipt?')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u6" data-name="é¤å…ç‚¹é¤" data-keywords="ç‚¹é¤ åƒé¥­ é¤å… order food">
            <div class="unit-header">é¤å…ç‚¹é¤</div>
            <div class="step-container">
                <span class="step-label">Step 1: æˆ‘æƒ³è¦ <span class="pattern-box">I'd like ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'd like <span class="highlight" id="u6-s1-word">the steak</span>.</div><div class="translation" id="u6-s1-trans">æˆ‘æƒ³è¦ç‰›æ’ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u6-s1-word', 'I would like', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u6-s1-chips">
                    <div class="chip active" onclick="updateUnit(6, 1, 'the steak', 'ç‰›æ’', 'I would like', '', this)">the steak</div>
                    <div class="chip" onclick="updateUnit(6, 1, 'a salad', 'æ²™æ‹‰', 'I would like', '', this)">a salad</div>
                    <div class="chip" onclick="updateUnit(6, 1, 'a burger', 'æ±‰å ¡', 'I would like', '', this)">a burger</div>
                    <div class="chip" onclick="updateUnit(6, 1, 'the pasta', 'æ„é¢', 'I would like', '', this)">the pasta</div>
                    <div class="chip" onclick="updateUnit(6, 1, 'some water', 'ä¸€äº›æ°´', 'I would like', '', this)">some water</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(6, 1, 'I would like', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: å¿Œå£ <span class="pattern-box">No ... please.</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">No <span class="highlight" id="u6-s2-word">onions</span> please.</div><div class="translation" id="u6-s2-trans">è¯·ä¸è¦æ´‹è‘±ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u6-s2-word', 'No', 'please.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u6-s2-chips">
                    <div class="chip active" onclick="updateUnit(6, 2, 'onions', 'æ´‹è‘±', 'No', 'please', this)">onions</div>
                    <div class="chip" onclick="updateUnit(6, 2, 'ice', 'å†°', 'No', 'please', this)">ice</div>
                    <div class="chip" onclick="updateUnit(6, 2, 'spice', 'è¾£', 'No', 'please', this)">spice</div>
                    <div class="chip" onclick="updateUnit(6, 2, 'sugar', 'ç³–', 'No', 'please', this)">sugar</div>
                    <div class="chip" onclick="updateUnit(6, 2, 'cilantro', 'é¦™èœ', 'No', 'please', this)">cilantro</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(6, 2, 'No', 'please.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'd like the burger. No onions please."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I would like the burger. No onions please.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u7" data-name="æœ‹å‹èšé¤" data-keywords="èšé¤ ä¹°å• AAåˆ¶ split bill">
            <div class="unit-header">æœ‹å‹èšé¤</div>
            <div class="step-container">
                <span class="step-label">Step 1: æè®® <span class="pattern-box">Let's ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Let's <span class="highlight" id="u7-s1-word">split the bill</span>.</div><div class="translation" id="u7-s1-trans">å’±ä»¬AAåˆ¶å§ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u7-s1-word', 'Let us', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u7-s1-chips">
                    <div class="chip active" onclick="updateUnit(7, 1, 'split the bill', 'AAåˆ¶', 'Let us', '', this)">split the bill</div>
                    <div class="chip" onclick="updateUnit(7, 1, 'share this', 'åˆ†ç€åƒè¿™ä¸ª', 'Let us', '', this)">share this</div>
                    <div class="chip" onclick="updateUnit(7, 1, 'get dessert', 'ç‚¹ä¸ªç”œç‚¹', 'Let us', '', this)">get dessert</div>
                    <div class="chip" onclick="updateUnit(7, 1, 'grab a drink', 'å–ä¸€æ¯', 'Let us', '', this)">grab a drink</div>
                    <div class="chip" onclick="updateUnit(7, 1, 'go dutch', 'å„ä»˜å„çš„', 'Let us', '', this)">go dutch</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(7, 1, 'Let us', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: è¯·å®¢ <span class="pattern-box">It's on ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">It's on <span class="highlight" id="u7-s2-word">me</span>.</div><div class="translation" id="u7-s2-trans">æˆ‘è¯·å®¢ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u7-s2-word', 'It is on', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u7-s2-chips">
                    <div class="chip active" onclick="updateUnit(7, 2, 'me', 'æˆ‘(è¯·å®¢)', 'It is on', '', this)">me</div>
                    <div class="chip" onclick="updateUnit(7, 2, 'the house', 'è€æ¿(å…å•)', 'It is on', '', this)">the house</div>
                    <div class="chip" onclick="updateUnit(7, 2, 'Henry', 'Henry', 'It is on', '', this)">Henry</div>
                    <div class="chip" onclick="updateUnit(7, 2, 'my treat', 'æˆ‘è¯·å®¢(åŒä¹‰)', 'This is', '', this)">my treat</div>
                    <div class="chip" onclick="updateUnit(7, 2, 'the company', 'å…¬å¸(æŠ¥é”€)', 'It is on', '', this)">the company</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(7, 2, 'It is on', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"No need to split. It's on me tonight."</div>
                <button class="combo-audio-btn" onclick="speakDirect('No need to split. It is on me tonight.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u8" data-name="å¶é‡å™æ—§" data-keywords="å™æ—§ èŠå¤© å¯’æš„ long time">
            <div class="unit-header">å¶é‡å™æ—§</div>
            <div class="step-container">
                <span class="step-label">Step 1: é—®å€™ <span class="pattern-box">How's ... ?</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Long time no see! How's <span class="highlight" id="u8-s1-word">everything</span>?</div><div class="translation" id="u8-s1-trans">å¥½ä¹…ä¸è§ï¼ä¸€åˆ‡éƒ½å¥½å—ï¼Ÿ</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u8-s1-word', 'Long time no see! How is', '?')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u8-s1-chips">
                    <div class="chip active" onclick="updateUnit(8, 1, 'everything', 'ä¸€åˆ‡', 'How is', '?', this)">everything</div>
                    <div class="chip" onclick="updateUnit(8, 1, 'your family', 'å®¶äºº', 'How is', '?', this)">your family</div>
                    <div class="chip" onclick="updateUnit(8, 1, 'work', 'å·¥ä½œ', 'How is', '?', this)">work</div>
                    <div class="chip" onclick="updateUnit(8, 1, 'life', 'ç”Ÿæ´»', 'How is', '?', this)">life</div>
                    <div class="chip" onclick="updateUnit(8, 1, 'your dog', 'ä½ çš„ç‹—', 'How is', '?', this)">your dog</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(8, 1, 'How is', '?')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: çº¦å®š <span class="pattern-box">We should ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">We should <span class="highlight" id="u8-s2-word">catch up</span>.</div><div class="translation" id="u8-s2-trans">æˆ‘ä»¬åº”è¯¥å™å™æ—§ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u8-s2-word', 'We should', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u8-s2-chips">
                    <div class="chip active" onclick="updateUnit(8, 2, 'catch up', 'å™å™æ—§', 'We should', '', this)">catch up</div>
                    <div class="chip" onclick="updateUnit(8, 2, 'hang out', 'å‡ºæ¥ç©', 'We should', '', this)">hang out</div>
                    <div class="chip" onclick="updateUnit(8, 2, 'grab coffee', 'å–æ¯å’–å•¡', 'We should', '', this)">grab coffee</div>
                    <div class="chip" onclick="updateUnit(8, 2, 'keep in touch', 'ä¿æŒè”ç³»', 'We should', '', this)">keep in touch</div>
                    <div class="chip" onclick="updateUnit(8, 2, 'have dinner', 'åƒä¸ªé¥­', 'We should', '', this)">have dinner</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(8, 2, 'We should', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"Long time no see! We should grab coffee sometime."</div>
                <button class="combo-audio-btn" onclick="speakDirect('Long time no see! We should grab coffee sometime.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>
        <div class="unit-card" id="u9" data-name="æ‰“è½¦å‡ºè¡Œ" data-keywords="æ‰“è½¦ å¸æœº taxi uber ride">
            <div class="unit-header">æ‰“è½¦å‡ºè¡Œ</div>
            <div class="step-container">
                <span class="step-label">Step 1: ç›®çš„åœ° <span class="pattern-box">I'm going to ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'm going to <span class="highlight" id="u9-s1-word">JFK Airport</span>.</div><div class="translation" id="u9-s1-trans">æˆ‘è¦å»JFKæœºåœºã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u9-s1-word', 'I am going to', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u9-s1-chips">
                    <div class="chip active" onclick="updateUnit(9, 1, 'JFK Airport', 'JFKæœºåœº', 'I am going to', '', this)">JFK Airport</div>
                    <div class="chip" onclick="updateUnit(9, 1, 'Times Square', 'æ—¶ä»£å¹¿åœº', 'I am going to', '', this)">Times Square</div>
                    <div class="chip" onclick="updateUnit(9, 1, 'this address', 'è¿™ä¸ªåœ°å€', 'I am going to', '', this)">this address</div>
                    <div class="chip" onclick="updateUnit(9, 1, 'Flushing', 'æ³•æ‹‰ç››', 'I am going to', '', this)">Flushing</div>
                    <div class="chip" onclick="updateUnit(9, 1, 'Main Street', 'ä¸»è¡—', 'I am going to', '', this)">Main Street</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(9, 1, 'I am going to', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: ä¸‹è½¦ç‚¹ <span class="pattern-box">Drop me off ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Drop me off <span class="highlight" id="u9-s2-word">here</span>.</div><div class="translation" id="u9-s2-trans">å°±åœ¨è¿™å„¿ä¸‹ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u9-s2-word', 'Drop me off', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u9-s2-chips">
                    <div class="chip active" onclick="updateUnit(9, 2, 'here', 'è¿™å„¿', 'Drop me off', '', this)">here</div>
                    <div class="chip" onclick="updateUnit(9, 2, 'at the corner', 'è·¯å£', 'Drop me off', '', this)">at the corner</div>
                    <div class="chip" onclick="updateUnit(9, 2, 'across the street', 'è¡—å¯¹é¢', 'Drop me off', '', this)">across the street</div>
                    <div class="chip" onclick="updateUnit(9, 2, 'by the light', 'çº¢ç»¿ç¯æ—', 'Drop me off', '', this)">by the light</div>
                    <div class="chip" onclick="updateUnit(9, 2, 'in front of the hotel', 'é…’åº—é—¨å£', 'Drop me off', '', this)">in front of the hotel</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(9, 2, 'Drop me off', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'm going to Main Street. Drop me off at the corner."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I am going to Main Street. Drop me off at the corner.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u10" data-name="ç´§æ€¥æ±‚åŠ©" data-keywords="æ€¥æ•‘ åŒ»ç”Ÿ è­¦å¯Ÿ help 911">
            <div class="unit-header">ç´§æ€¥æ±‚åŠ©</div>
            <div class="step-container">
                <span class="step-label">Step 1: éœ€æ±‚ <span class="pattern-box">I need ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I need <span class="highlight" id="u10-s1-word">a doctor</span>.</div><div class="translation" id="u10-s1-trans">æˆ‘éœ€è¦åŒ»ç”Ÿã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u10-s1-word', 'I need', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u10-s1-chips">
                    <div class="chip active" onclick="updateUnit(10, 1, 'a doctor', 'åŒ»ç”Ÿ', 'I need', '', this)">a doctor</div>
                    <div class="chip" onclick="updateUnit(10, 1, 'help', 'å¸®åŠ©', 'I need', '', this)">help</div>
                    <div class="chip" onclick="updateUnit(10, 1, 'an ambulance', 'æ•‘æŠ¤è½¦', 'I need', '', this)">an ambulance</div>
                    <div class="chip" onclick="updateUnit(10, 1, 'the police', 'è­¦å¯Ÿ', 'I need', '', this)">the police</div>
                    <div class="chip" onclick="updateUnit(10, 1, 'a translator', 'ç¿»è¯‘', 'I need', '', this)">a translator</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(10, 1, 'I need', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: çŠ¶å†µ <span class="pattern-box">I feel ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I feel <span class="highlight" id="u10-s2-word">dizzy</span>.</div><div class="translation" id="u10-s2-trans">æˆ‘å¤´æ™•ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u10-s2-word', 'I feel', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u10-s2-chips">
                    <div class="chip active" onclick="updateUnit(10, 2, 'dizzy', 'å¤´æ™•', 'I feel', '', this)">dizzy</div>
                    <div class="chip" onclick="updateUnit(10, 2, 'pain', 'ç–¼', 'I feel', '', this)">pain</div>
                    <div class="chip" onclick="updateUnit(10, 2, 'sick', 'æ¶å¿ƒ/ç”Ÿç—…', 'I feel', '', this)">sick</div>
                    <div class="chip" onclick="updateUnit(10, 2, 'hurt', 'å—ä¼¤äº†', 'I am', '', this)">hurt</div>
                    <div class="chip" onclick="updateUnit(10, 2, 'cannot breathe', 'æ— æ³•å‘¼å¸', 'I', '', this)">cannot breathe</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(10, 2, 'I feel', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I need an ambulance. I cannot breathe."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I need an ambulance. I cannot breathe.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u11" data-name="æ²¡å¬æ‡‚" data-keywords="å¬ä¸æ‡‚ é‡å¤ æ…¢ç‚¹ understand">
            <div class="unit-header">æ²¡å¬æ‡‚</div>
            <div class="step-container">
                <span class="step-label">Step 1: è¯·æ±‚ <span class="pattern-box">Could you ... ?</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">Could you <span class="highlight" id="u11-s1-word">say that again</span>?</div><div class="translation" id="u11-s1-trans">èƒ½å†è¯´ä¸€éå—ï¼Ÿ</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u11-s1-word', 'Could you', '?')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u11-s1-chips">
                    <div class="chip active" onclick="updateUnit(11, 1, 'say that again', 'å†è¯´ä¸€é', 'Could you', '?', this)">say that again</div>
                    <div class="chip" onclick="updateUnit(11, 1, 'speak slower', 'è¯´æ…¢ç‚¹', 'Could you', '?', this)">speak slower</div>
                    <div class="chip" onclick="updateUnit(11, 1, 'write it down', 'å†™ä¸‹æ¥', 'Could you', '?', this)">write it down</div>
                    <div class="chip" onclick="updateUnit(11, 1, 'show me', 'æŒ‡ç»™æˆ‘çœ‹', 'Could you', '?', this)">show me</div>
                    <div class="chip" onclick="updateUnit(11, 1, 'translate', 'ç¿»è¯‘ä¸€ä¸‹', 'Could you', '?', this)">translate</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(11, 1, 'Could you', '?')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: è¯´æ˜ <span class="pattern-box">I don't ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I don't <span class="highlight" id="u11-s2-word">understand</span>.</div><div class="translation" id="u11-s2-trans">æˆ‘ä¸æ˜ç™½ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u11-s2-word', 'I do not', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u11-s2-chips">
                    <div class="chip active" onclick="updateUnit(11, 2, 'understand', 'æ˜ç™½', 'I do not', '', this)">understand</div>
                    <div class="chip" onclick="updateUnit(11, 2, 'speak English', 'ä¼šè¯´è‹±è¯­', 'I do not', 'well', this)">speak English</div>
                    <div class="chip" onclick="updateUnit(11, 2, 'know', 'çŸ¥é“', 'I do not', '', this)">know</div>
                    <div class="chip" onclick="updateUnit(11, 2, 'get it', 'æ‡‚', 'I do not', '', this)">get it</div>
                    <div class="chip" onclick="updateUnit(11, 2, 'hear you', 'å¬æ¸…', 'I did not', '', this)">hear you</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(11, 2, 'I do not', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"Sorry, I don't speak English well. Could you write it down?"</div>
                <button class="combo-audio-btn" onclick="speakDirect('Sorry, I do not speak English well. Could you write it down?')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u12" data-name="è´­ç‰©é€€è´§" data-keywords="é€€è´§ é€€æ¬¾ æ¢è´§ return refund">
            <div class="unit-header">è´­ç‰©é€€è´§</div>
            <div class="step-container">
                <span class="step-label">Step 1: ç›®çš„ <span class="pattern-box">I'd like to ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'd like to <span class="highlight" id="u12-s1-word">return this</span>.</div><div class="translation" id="u12-s1-trans">æˆ‘æƒ³é€€è´§ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u12-s1-word', 'I would like to', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u12-s1-chips">
                    <div class="chip active" onclick="updateUnit(12, 1, 'return this', 'é€€è´§', 'I would like to', '', this)">return this</div>
                    <div class="chip" onclick="updateUnit(12, 1, 'exchange this', 'æ¢è´§', 'I would like to', '', this)">exchange this</div>
                    <div class="chip" onclick="updateUnit(12, 1, 'get a refund', 'é€€æ¬¾', 'I would like to', '', this)">get a refund</div>
                    <div class="chip" onclick="updateUnit(12, 1, 'try this on', 'è¯•ç©¿', 'I would like to', '', this)">try this on</div>
                    <div class="chip" onclick="updateUnit(12, 1, 'cancel this', 'å–æ¶ˆè¿™ä¸ª', 'I would like to', '', this)">cancel this</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(12, 1, 'I would like to', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: ç†ç”± <span class="pattern-box">It's ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">It's <span class="highlight" id="u12-s2-word">broken</span>.</div><div class="translation" id="u12-s2-trans">å®ƒåäº†ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u12-s2-word', 'It is', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u12-s2-chips">
                    <div class="chip active" onclick="updateUnit(12, 2, 'broken', 'åäº†', 'It is', '', this)">broken</div>
                    <div class="chip" onclick="updateUnit(12, 2, 'too small', 'å¤ªå°äº†', 'It is', '', this)">too small</div>
                    <div class="chip" onclick="updateUnit(12, 2, 'the wrong size', 'å°ºç ä¸å¯¹', 'It is', '', this)">the wrong size</div>
                    <div class="chip" onclick="updateUnit(12, 2, 'not working', 'åäº†/ä¸å·¥ä½œ', 'It is', '', this)">not working</div>
                    <div class="chip" onclick="updateUnit(12, 2, 'expired', 'è¿‡æœŸäº†', 'It is', '', this)">expired</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(12, 2, 'It is', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'd like to return this. It is too small."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I would like to return this. It is too small.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

        <div class="unit-card" id="u13" data-name="é¢„çº¦æ—¶é—´" data-keywords="é¢„çº¦ æ—¶é—´ å®‰æ’ appointment">
            <div class="unit-header">é¢„çº¦æ—¶é—´</div>
            <div class="step-container">
                <span class="step-label">Step 1: åŠ¨ä½œ <span class="pattern-box">I'd like to ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">I'd like to <span class="highlight" id="u13-s1-word">make an appointment</span>.</div><div class="translation" id="u13-s1-trans">æˆ‘æƒ³é¢„çº¦ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u13-s1-word', 'I would like to', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u13-s1-chips">
                    <div class="chip active" onclick="updateUnit(13, 1, 'make an appointment', 'é¢„çº¦', 'I would like to', '', this)">make an appointment</div>
                    <div class="chip" onclick="updateUnit(13, 1, 'reschedule', 'æ”¹æœŸ', 'I would like to', '', this)">reschedule</div>
                    <div class="chip" onclick="updateUnit(13, 1, 'cancel', 'å–æ¶ˆ', 'I would like to', '', this)">cancel</div>
                    <div class="chip" onclick="updateUnit(13, 1, 'confirm', 'ç¡®è®¤', 'I would like to', '', this)">confirm</div>
                    <div class="chip" onclick="updateUnit(13, 1, 'book a table', 'è®¢ä½(åƒé¥­)', 'I would like to', '', this)">book a table</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(13, 1, 'I would like to', '.')">ï¼‹</button></div>
                </div>
            </div>
            <hr class="divider">
            <div class="step-container">
                <span class="step-label">Step 2: æ—¶é—´ <span class="pattern-box">At ...</span></span>
                <div class="display-area">
                    <div class="text-content"><div class="english-sentence">At <span class="highlight" id="u13-s2-word">2 PM</span>.</div><div class="translation" id="u13-s2-trans">åœ¨ä¸‹åˆ2ç‚¹ã€‚</div></div>
                    <button class="btn-audio" onclick="speakWholeSentence('u13-s2-word', 'At', '.')">ğŸ”Š</button>
                </div>
                <div class="chips-container" id="u13-s2-chips">
                    <div class="chip active" onclick="updateUnit(13, 2, '2 PM', 'ä¸‹åˆ2ç‚¹', 'At', '', this)">2 PM</div>
                    <div class="chip" onclick="updateUnit(13, 2, '3:30', '3ç‚¹åŠ', 'At', '', this)">3:30</div>
                    <div class="chip" onclick="updateUnit(13, 2, 'noon', 'ä¸­åˆ', 'At', '', this)">noon</div>
                    <div class="chip" onclick="updateUnit(13, 2, 'tomorrow morning', 'æ˜å¤©æ—©ä¸Š', 'On', '', this)">tomorrow morning</div>
                    <div class="chip" onclick="updateUnit(13, 2, 'next week', 'ä¸‹å‘¨', 'In', '', this)">next week</div>
                    <div class="add-btn-wrapper"><button class="chip add-chip-btn" onclick="addCustomChip(13, 2, 'At', '.')">ï¼‹</button></div>
                </div>
            </div>
            <div class="combo-box">
                <div class="combo-title">ğŸš€ é€»è¾‘æ„é€ </div>
                <div class="combo-text">"I'd like to make an appointment. At 2 PM, please."</div>
                <button class="combo-audio-btn" onclick="speakDirect('I would like to make an appointment. At 2 PM, please.')">ğŸ”Š</button>
            </div>
            <div class="scroll-hint">â¬‡ï¸ å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š</div>
        </div>

    </div> <div class="fixed-footer">
        <p>&copy; <span id="year"></span> Henry's Survival English Guide.</p>
    </div>

    <script>
        // === æ ¸å¿ƒé€»è¾‘ (V25.8 è¶…çº§è”æƒ³è¯åº“ç‰ˆ) ===
        let usageData = {};
        let currentRandomUnit = null;
        let pressTimer;

        // 1. åˆå§‹åŒ–
        window.onload = function() {
            document.getElementById('year').innerText = new Date().getFullYear();
            loadTheme();
            loadCustomChips();
            loadUsageData();
            
            // æ³¨å…¥æ‰©å®¹åçš„è¶…çº§è¯åº“
            injectSmartKeywords();

            checkMonthlyReport(); 
            autoSortUnits();
            
            // æ¢å¤ä¸Šæ¬¡é€‰æ‹©
            for (let i = 1; i <= 13; i++) {
                if(document.getElementById(`u${i}`)) {
                    restoreSelection(i, 1);
                    restoreSelection(i, 2);
                }
            }
            
            setTimeout(() => { initBubbleTip(); }, 300);
            initScrollHints();
        };

        // === ğŸš€ æ ¸å¿ƒå‡çº§ï¼šè¶…çº§éšå½¢å…³é”®è¯åº“ ===
        function injectSmartKeywords() {
            const smartMap = {
                // Unit 1: é‚»å±…
                1: "æ¬å®¶ è£…ä¿® æ–°æ¥ é™Œç”Ÿäºº éš”å£ æ¥¼ä¸Š æ¥¼ä¸‹ åµ å€Ÿè¿‡ å¿«é€’ å¸®å¿™ è®¤è¯† é—®å€™ hello hi greeting neighbor move noise package",
                
                // Unit 2: ä½ç½®
                2: "è¿·è·¯ æ‰¾ä¸åˆ° å“ªå„¿ æ€ä¹ˆèµ° æ–¹å‘ åœ°å›¾ å¯¼èˆª ç”µæ¢¯ æ¥¼æ¢¯ å‡ºå£ å…¥å£ åœ¨å“ª å‡ æ¥¼ lost map where direction elevator exit entrance",
                
                // Unit 3: æ´—æ‰‹é—´ (åŒ…å«å†…æ€¥ã€å……ç”µ)
                3: "å†…æ€¥ æ¸´äº† å°¿æ€¥ æ‹‰è‚šå­ æ†‹ä¸ä½ å¤§ä¾¿ å°ä¾¿ å•æ‰€ èŒ…æˆ¿ å«ç”Ÿé—´ å§¨å¦ˆ ç—›ç» æ²¡ç”µ å……ç”µå™¨ å€Ÿç”¨ æ‰‹æœºæ²¡ç”µ è¹­ç½‘ wifi battery charge toilet restroom urgent pee poop",
                
                // Unit 4: é“¶è¡Œ
                4: "æ²¡é’± é’± ç°é‡‘ è½¬è´¦ å­˜é’± å–é’± æ¢æ±‡ ç¾é‡‘ äººæ°‘å¸ æ±‡ç‡ æ”¯ç¥¨ é“¶è¡Œå¡ æŒ‚å¤± æ‰‹ç»­è´¹ money cash bank deposit withdraw transfer check card",
                
                // Unit 5: ç»“è´¦
                5: "ä¹°å• ä»˜é’± å¤šå°‘é’± è´µ ä¾¿å®œ åˆ·å¡ æ”¯ä»˜å® å¾®ä¿¡ æ‰«ç  ApplePay é›¶é’± æ‰¾é›¶ æ”¶æ® å‘ç¥¨ å¡‘æ–™è¢‹ è¢‹å­ pay cost bill receipt bag plastic",
                
                // Unit 6: ç‚¹é¤ (åŒ…å«æ¸´äº†ã€é¥¿äº†)
                6: "æ¸´äº† é¥¿äº† åƒé¥­ å–æ°´ é¥®æ–™ å•¤é…’ å¯ä¹ èœå• å¥½åƒ éš¾åƒ è¾£ ç”œ å’¸ é…¸ å¿Œå£ è¿‡æ• æµ·é²œ ç‰›è‚‰ çŒªè‚‰ é¸¡è‚‰ å¤–å– æ‰“åŒ… menu eat food drink hungry thirsty spicy",
                
                // Unit 7: èšé¤
                7: "è¯·å®¢ AAåˆ¶ å‡æ‘Š ç®—è´¦ è°ä»˜é’± æœ‹å‹ èšä¼š ä¹Ÿå°±æ˜¯ ç”šè‡³ ä¹Ÿæ˜¯æˆ‘ æ—¢ç„¶ è¿˜æ˜¯æˆ‘æ¥ åˆ«æŠ¢ treat share split bill dinner party",
                
                // Unit 8: å™æ—§
                8: "å–èŒ¶ å–å’–å•¡ èŠå¤© èŠèŠ å¾ˆä¹…æ²¡è§ è€æœ‹å‹ è€åŒå­¦ å™æ—§ å¾®ä¿¡ è”ç³» ç”µè¯ å·ç  æ€ä¹ˆæ · æœ€è¿‘ chat coffee long time see contact",
                
                // Unit 9: æ‰“è½¦
                9: "å›å®¶ å»å“ª å¸æœº å¸ˆå‚… æœºåœº è½¦ç«™ é…’åº— æ€ä¹ˆèµ° åˆ°äº† åœè½¦ ä¸‹è½¦ æ‹å¼¯ å µè½¦ è¿Ÿåˆ° èµ¶æ—¶é—´ taxi uber lyft car ride driver airport",
                
                // Unit 10: æ€¥æ•‘
                10: "æ•‘å‘½ ç–¼ ç—› éš¾å— æ™•å€’ æµè¡€ éª¨æŠ˜ å‘çƒ§ å‘•å åŒ»é™¢ åŒ»ç”Ÿ æŠ¤å£« è­¦å¯Ÿ æŠ¥è­¦ 110 911 120 æ•‘æŠ¤è½¦ æŠ¢åŠ« å· å±é™© help sick pain emergency hospital police",
                
                // Unit 11: æ²¡å¬æ‡‚
                11: "å¬ä¸æ‡‚ å•¥ ä»€ä¹ˆ æ²¡å¬æ¸… å†è¯´ä¸€é æ…¢ç‚¹ ç¿»è¯‘ è‹±è¯­ä¸å¥½ ä¸ä¼šè‹±è¯­ ä¸­æ–‡ å•¥æ„æ€ å†™ä¸‹æ¥ è§£é‡Š what pardon repeat slow translate understand mean",
                
                // Unit 12: é€€è´§
                12: "åäº† çƒ‚äº† ç ´äº† å‡çš„ ä¸å–œæ¬¢ ä¸åˆé€‚ å¤§äº† å°äº† è´¨é‡é—®é¢˜ å®¢æœ å”®å é€€æ¬¾ æ¢è´§ æ¢ä¸€ä¸ª return refund exchange broken bad size",
                
                // Unit 13: é¢„çº¦
                13: "å®šæ—¶é—´ å‡ ç‚¹ ä»€ä¹ˆæ—¶å€™ é¥­åº—è®¢ä½ å®‰æ’ æ”¹æœŸ å–æ¶ˆ æ˜å¤© åå¤© ä¸‹å‘¨ æ—¢ç„¶ ç”šè‡³ ä¹Ÿå°±æ˜¯ çº¦ä¼š schedule time book reserve appointment cancel"
            };

            for (let id in smartMap) {
                const card = document.getElementById(`u${id}`);
                if (card) {
                    const originalKeys = card.getAttribute('data-keywords') || "";
                    // å…³é”®è¯å»é‡æ‹¼æ¥
                    const newKeys = originalKeys + " " + smartMap[id];
                    card.setAttribute('data-keywords', newKeys);
                }
            }
        }

        // 2. æ™ºèƒ½ä¸‹æ»‘æç¤º
        function initScrollHints() {
            const cards = document.querySelectorAll('.unit-card');
            cards.forEach(card => {
                if (card.scrollHeight > card.clientHeight) {
                    const hint = card.querySelector('.scroll-hint');
                    if (hint) hint.classList.add('visible');
                }
                card.addEventListener('scroll', function() {
                    const hint = this.querySelector('.scroll-hint');
                    if (hint) hint.classList.remove('visible');
                });
            });
        }

        // 3. æ™ºèƒ½æ°”æ³¡å¼•å¯¼
        function initBubbleTip() {
            const center = window.innerWidth / 2;
            let bestCard = null;
            let minDiff = Infinity;
            
            document.querySelectorAll('.unit-card').forEach(card => {
                const rect = card.getBoundingClientRect();
                const cardCenter = rect.left + rect.width / 2;
                const diff = Math.abs(center - cardCenter);
                if(diff < minDiff) { minDiff = diff; bestCard = card; }
            });

            if (!bestCard) return;

            const wrapper = bestCard.querySelector('.step-container .chips-container .add-btn-wrapper');
            if (wrapper) {
                if(wrapper.querySelector('.bubble-tip')) return;
                const bubble = document.createElement('div');
                bubble.className = 'bubble-tip';
                bubble.innerText = 'æ²¡æ‰¾åˆ°ï¼Ÿç‚¹æˆ‘æ·»åŠ ï¼Œè¿˜èƒ½å‘éŸ³ï¼';
                wrapper.appendChild(bubble);
                setTimeout(() => { dismissBubble(bubble); }, 15000);
            }
        }

        function dismissBubble(element) {
            if(!element) return;
            element.classList.add('fade-out');
            setTimeout(() => { element.remove(); }, 1000);
        }

        // 4. è‡ªå®šä¹‰è¯åº“
        function addCustomChip(unitNum, stepNum, prefix, suffix) {
            const bubble = document.querySelector('.bubble-tip');
            if(bubble) dismissBubble(bubble);

            const eng = prompt("è¯·è¾“å…¥è‹±æ–‡å•è¯æˆ–çŸ­è¯­ (e.g. oat milk):"); if(!eng) return;
            const cn = prompt("è¯·è¾“å…¥ä¸­æ–‡æ„æ€ (e.g. ç‡•éº¦å¥¶):"); if(!cn) return;

            const chipData = { unitNum, stepNum, eng, cn, prefix, suffix };
            const key = `custom_chips_u${unitNum}_s${stepNum}`;
            let list = JSON.parse(localStorage.getItem(key) || "[]");
            list.push(chipData);
            localStorage.setItem(key, JSON.stringify(list));

            renderAndClickChip(chipData, true);
        }

        // 5. ç´§æ€¥æ¨¡å¼
        function toggleEmergency() {
            const overlay = document.getElementById('emergencyOverlay');
            overlay.classList.toggle('active');
        }

        // 6. æ™ºèƒ½æ’åº
        function loadUsageData() {
            usageData = JSON.parse(localStorage.getItem('unit_usage') || "{}");
        }

        function autoSortUnits() {
            const container = document.getElementById('content-area');
            const cards = Array.from(container.getElementsByClassName('unit-card'));
            cards.sort((a, b) => {
                const idA = parseInt(a.id.replace('u', ''));
                const idB = parseInt(b.id.replace('u', ''));
                const usageA = usageData[idA] || 0;
                const usageB = usageData[idB] || 0;
                if (usageA === usageB) return idA - idB;
                return usageA - usageB; 
            });
            cards.forEach(card => container.appendChild(card));
        }

        function incrementUsage(unitNum) {
            usageData[unitNum] = (usageData[unitNum] || 0) + 1;
            localStorage.setItem('unit_usage', JSON.stringify(usageData));
        }

        // 7. æœˆåº¦æŠ¥å‘Š
        function checkMonthlyReport() {
            const now = new Date();
            const currentMonth = `${now.getFullYear()}-${now.getMonth() + 1}`; 
            const storedMonth = localStorage.getItem('stats_last_month');
            let openCount = parseInt(localStorage.getItem('stats_open_count') || "0") + 1;
            localStorage.setItem('stats_open_count', openCount);

            if (storedMonth && storedMonth !== currentMonth) {
                showMonthlySummary(storedMonth);
                localStorage.setItem('stats_open_count', 1);
            }
            localStorage.setItem('stats_last_month', currentMonth);
        }

        function showMonthlySummary(monthStr) {
            const openCount = localStorage.getItem('stats_open_count');
            let msg = `å˜¿ï¼è€æœ‹å‹ï¼Œ${monthStr.split('-')[1]}æœˆè¿‡å¾—æ€ä¹ˆæ ·ï¼Ÿ<br><br>è¿™ä¸ªæœˆä½ ä¸€å…±æ‰“å¼€äº†è¿™é‡Œ <b>${openCount}</b> æ¬¡ã€‚<br>`;
            if(openCount > 20) msg += "ğŸ‰ å¤ªæ£’äº†ï¼è¯·åŠ¡å¿…ä¿æŒè¿™ä¸ªèŠ‚å¥ï¼<br><br>";
            else msg += "ğŸ¥º è®°å¾—å¸¸æ¥çœ‹çœ‹æˆ‘å“¦~<br><br>";
            document.getElementById('reportContent').innerHTML = msg;
            document.getElementById('reportModal').style.display = 'flex';
        }

        // 8. éšæœºæŠ½æŸ¥
        function startRandomDrill() {
            const u = Math.floor(Math.random() * 13) + 1; 
            const unitCard = document.getElementById(`u${u}`);
            if(!unitCard) { startRandomDrill(); return; } 
            const rawTitle = unitCard.querySelector('.unit-header').childNodes[0].textContent.trim();
            const modal = document.getElementById('randomModal');
            document.getElementById('modalQuestion').innerText = `${rawTitle}`;
            modal.style.display = 'flex';
            currentRandomUnit = u;
        }

        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function revealRandomAnswer() { closeModal('randomModal'); scrollToUnit(`u${currentRandomUnit}`); }

        // 9. æ¨ªå‘å¯¼èˆª
        function scrollToUnit(id) {
            const el = document.getElementById(id);
            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }

        // 10. åŸºç¡€åŠŸèƒ½
        function toggleTheme() {
            const html = document.documentElement;
            const newTheme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        }
        function loadTheme() {
            const saved = localStorage.getItem('theme');
            if(saved) document.documentElement.setAttribute('data-theme', saved);
        }

        function filterUnits() {
            const filter = document.getElementById('searchBox').value.toLowerCase();
            const cards = document.getElementsByClassName('unit-card');
            for(let card of cards) {
                const text = card.innerText.toLowerCase();
                const keys = card.getAttribute('data-keywords') || "";
                card.style.display = (text.includes(filter) || keys.includes(filter)) ? "" : "none";
            }
        }

        function loadCustomChips() {
            for(let u=1; u<=13; u++) {
                for(let s=1; s<=2; s++) {
                    const list = JSON.parse(localStorage.getItem(`custom_chips_u${u}_s${s}`) || "[]");
                    list.forEach(d => renderAndClickChip(d, false));
                }
            }
        }

        function renderAndClickChip(data, triggerClick) {
            const container = document.getElementById(`u${data.unitNum}-s${data.stepNum}-chips`);
            if(!container) return;
            const btn = document.createElement('div');
            btn.className = 'chip';
            btn.innerText = data.eng;
            btn.onmousedown = btn.ontouchstart = function() {
                pressTimer = setTimeout(() => {
                    if(confirm(`ç®¡ç† "${data.eng}":\nç‚¹å‡»[ç¡®å®š]ä¿®æ”¹ï¼Œç‚¹å‡»[å–æ¶ˆ]ç»§ç»­ã€‚`)) {
                        const newTxt = prompt("ä¿®æ”¹è‹±æ–‡ (ç•™ç©ºåˆ™åˆ é™¤):", data.eng);
                        if(newTxt === null) return; 
                        updateCustomChipInStorage(data, newTxt);
                        if(newTxt === "") btn.remove();
                        else { btn.innerText = newTxt; data.eng = newTxt; }
                    }
                }, 800);
            };
            btn.onmouseup = btn.ontouchend = function() { clearTimeout(pressTimer); };
            btn.onclick = function() { updateUnit(data.unitNum, data.stepNum, data.eng, data.cn, data.prefix, data.suffix, this); };
            
            const wrapper = container.querySelector('.add-btn-wrapper');
            if(wrapper) container.insertBefore(btn, wrapper);
            else {
                const addBtn = container.querySelector('.add-chip-btn');
                if(addBtn) container.insertBefore(btn, addBtn);
                else container.appendChild(btn);
            }
            if (triggerClick) btn.click();
        }

        function updateCustomChipInStorage(oldData, newEng) {
            const key = `custom_chips_u${oldData.unitNum}_s${oldData.stepNum}`;
            let list = JSON.parse(localStorage.getItem(key) || "[]");
            if(newEng === "") list = list.filter(item => item.eng !== oldData.eng);
            else {
                const idx = list.findIndex(item => item.eng === oldData.eng);
                if(idx > -1) list[idx].eng = newEng;
            }
            localStorage.setItem(key, JSON.stringify(list));
        }

        function toggleQuizMode() { document.body.classList.toggle('quiz-mode'); }

        // === æ ¸å¿ƒé€»è¾‘ä¿®æ”¹ï¼šæ•´å¥ç¿»è¯‘æ‹¼æ¥ ===
        function updateUnit(unitNum, stepNum, engWord, cnWord, prefixEng, suffixCn, element, playSound = true) {
            incrementUsage(unitNum);

            const wordId = `u${unitNum}-s${stepNum}-word`;
            const displayEl = document.getElementById(wordId);
            if(displayEl) displayEl.innerText = engWord;
            
            let fullCn = "";
            const cw = cnWord; 
            const sfx = suffixCn ? suffixCn : "ã€‚";

            switch(unitNum) {
                case 1: 
                    if(stepNum === 1) fullCn = "å—¨ï¼Œæˆ‘æ˜¯" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "æˆ‘ä½åœ¨" + cw + "ã€‚";
                    break;
                case 2: 
                    if(stepNum === 1) fullCn = "æ‰“æ‰°ä¸€ä¸‹ï¼Œæˆ‘åœ¨æ‰¾" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "èƒ½å‘Šè¯‰æˆ‘" + cw + sfx;
                    break;
                case 3: 
                    if(stepNum === 1) fullCn = "æˆ‘èƒ½å€Ÿç”¨ä¸€ä¸‹æ‚¨çš„" + cw + sfx;
                    if(stepNum === 2) fullCn = "çœŸçš„å¾ˆ" + cw + "ã€‚"; 
                    break;
                case 4: 
                    if(stepNum === 1) fullCn = "æˆ‘æƒ³" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "è¿™æ˜¯æˆ‘çš„" + cw + "ã€‚";
                    break;
                case 5: 
                    if(stepNum === 1) fullCn = "æˆ‘æƒ³ç”¨" + cw + "æ”¯ä»˜ã€‚";
                    if(stepNum === 2) fullCn = "ä½ ä»¬æä¾›" + cw + sfx;
                    break;
                case 6: 
                    if(stepNum === 1) fullCn = "æˆ‘æƒ³è¦" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "è¯·ä¸è¦" + cw + "ã€‚";
                    break;
                case 7: 
                    if(stepNum === 1) fullCn = "å’±ä»¬" + cw + "å§ã€‚";
                    if(stepNum === 2) fullCn = "ä»Šå¤©" + cw + "ã€‚"; 
                    break;
                case 8: 
                    if(stepNum === 1) fullCn = "å¥½ä¹…ä¸è§ï¼" + cw + "æ€ä¹ˆæ ·ï¼Ÿ"; 
                    if(stepNum === 2) fullCn = "æˆ‘ä»¬åº”è¯¥" + cw + "ã€‚";
                    break;
                case 9: 
                    if(stepNum === 1) fullCn = "æˆ‘è¦å»" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "å°±åœ¨" + cw + "ä¸‹è½¦ã€‚";
                    break;
                case 10: 
                    if(stepNum === 1) fullCn = "æˆ‘éœ€è¦" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "æˆ‘æ„Ÿåˆ°" + cw + "ã€‚"; 
                    break;
                case 11: 
                    if(stepNum === 1) fullCn = "èƒ½" + cw + "å—ï¼Ÿ";
                    if(stepNum === 2) fullCn = "æˆ‘ä¸" + cw + "ã€‚";
                    break;
                case 12: 
                    if(stepNum === 1) fullCn = "æˆ‘æƒ³" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "å®ƒ" + cw + "ã€‚";
                    break;
                case 13: 
                    if(stepNum === 1) fullCn = "æˆ‘æƒ³" + cw + "ã€‚";
                    if(stepNum === 2) fullCn = "åœ¨" + cw + "ã€‚";
                    break;
                default:
                    fullCn = cw + sfx;
            }

            const transEl = document.getElementById(`u${unitNum}-s${stepNum}-trans`);
            if(transEl) transEl.innerText = fullCn;

            let container = element.parentElement;
            let chips = container.querySelectorAll('.chip');
            for(let chip of chips) chip.classList.remove('active');
            element.classList.add('active');

            localStorage.setItem(`u${unitNum}-s${stepNum}`, JSON.stringify({ engWord, cnWord, prefix: prefixEng, suffix: suffixCn }));
            if(playSound) speakDirect(engWord);
        }

        function restoreSelection(unitNum, stepNum) {
            const savedData = localStorage.getItem(`u${unitNum}-s${stepNum}`);
            if (savedData) {
                const data = JSON.parse(savedData);
                const container = document.getElementById(`u${unitNum}-s${stepNum}-chips`);
                if(container) {
                    const chips = container.querySelectorAll('.chip');
                    for(let chip of chips) {
                        if(chip.innerText === data.engWord) {
                            updateUnit(unitNum, stepNum, data.engWord, data.cnWord, data.prefix, data.suffix, chip, false);
                            break;
                        }
                    }
                }
            }
        }

        function speakWholeSentence(wordId, prefix, punctuation) {
            let word = document.getElementById(wordId).innerText;
            speakDirect(prefix + " " + word + punctuation);
        }

        function speakDirect(text) {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9; 
            window.speechSynthesis.speak(utterance);
        }
    </script>
</body>
</html>
      
